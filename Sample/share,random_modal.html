<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="/js/babel.min.js"></script>
    <script src="/js/polyfill.min.js"></script>
    <style>
        .modal{
            display:none;
            position:fixed;
            top:0px;
            left:0px;
            width:100%;
            height:100%;
            background-color:#dfc;
            z-index:1000;
        }.modal2{
            background-color:#dcf;
        }
    </style>
</head>
<body>

    <div style="width: 100%; text-align: center; margin-bottom: 64px;">
        <!-- 페이스북 공유 버튼 -->
        <a href="" onclick="window.open(url_combine_fb, '', 'scrollbars=no, width=600, height=600'); return false;">
            페이스북으로 공유
            <!-- <img src="//cfile10.uf.tistory.com/image/ 23E6BF33597DDB2112AFD3" title="페이스북으로 공유하기" class="sharebtn_custom" style="width: 32px;"> -->
        </a>
        <!-- 트위터 공유 버튼 --> 
        <a href="" onclick="window.open(url_combine_tw, '', 'scrollbars=no, width=600, height=600'); return false;">
            트위터로 공유
            <!-- <img src="//cfile27.uf.tistory.com/image/ 24DCB633597DDB2110B554" title="트위터로 공유하기" class="sharebtn_custom" style="width: 32px;"> -->
        </a> 
        <!-- 카카오 스토리 공유 버튼 -->
        <a href="" onclick="window.open(url_combine_ks, '', 'scrollbars=no, width=600, height=600'); return false;">
            카카오스토리로 공유
            <!-- <img src="//cfile9.uf.tistory.com/image/ 248F2A33597DDB21106A56" title="카카오스토리로 공유하기" class="sharebtn_custom" style="width: 32px;"> -->
        </a>
        <!-- 네이버 공유 버튼 -->
        <a href="" onclick="window.open(url_combine_naver, '', 'scrollbars=no, width=600, height=600'); return false;">
            네이버로 공유
            <!-- <img src="//cfile27.uf.tistory.com/image/ 2356C533597DDB21169BDB" title="네이버로 공유하기" class="sharebtn_custom" style="width: 32px;"> -->
        </a> 
        <!-- 밴드 공유 버튼 --> 
        <a href="" onclick="window.open(url_combine_band, '', 'scrollbars=no, width=584, height=635'); return false;">
            밴드로 공유하기
            <!-- <img src="//cfile9.uf.tistory.com/image/ 275BFB33597DDB21139B99" title="밴드로 공유하기" class="sharebtn_custom" style="width: 32px;"> -->
        </a>
    </div>
    <div class="modal modal1">
        모달창 1
        <button>닫기</button>
    </div>
    <div class="modal modal2">
        모달창 2
        <button>닫기</button>
    </div>
    <section class="check_wrap">
        <label for="q1">예</label>
        <input type="radio" id="q1" value="1" name="qu01">
        <label for="q2">아니요</label>
        <input type="radio" id="q2" value="0" name="qu01">
    </section>
    <section class="check_wrap">              
        <label for="q3">예</label>
        <input type="radio" id="q3" value="1" name="qu02">
        <label for="q4">아니요</label>
        <input type="radio" id="q4" value="0" name="qu02">
    </section>
    <section class="check_wrap">              
        <label for="q5">예</label>
        <input type="radio" id="q5" value="1" name="qu03">
        <label for="q6">아니요</label>
        <input type="radio" id="q6" value="0" name="qu03">
    </section>
    <section class="check_wrap">              
        <label for="q7">예</label>
        <input type="radio" id="q7" value="1" name="qu04">
        <label for="q8">아니요</label>
        <input type="radio" id="q8" value="0" name="qu04">
    </section>
    <button id="submit">등록완료</button>


    <script type="text/babel">
    // 모달 컨트롤
        const modals = document.querySelectorAll(`.modal`);
        const modals_close = document.querySelectorAll(`.modal button`);
        const close = () => {            
            for(let i = 0; i<modals.length; i++){
                modals[i].style.display = "none";
            }
        }        
        for(let i = 0; i<modals_close.length; i++){
            modals_close[i].addEventListener('click',function(){
                close();
            })
        }
        const modal_open = (target) => {
            const t = document.querySelector(`.${target}`);
            t.style.display = "block";
        }        

        // 답변에 따라 달라지는 모달창
        const submit = document.getElementById('submit');
        submit.addEventListener('click',function(){
            const qu01 = document.querySelector('input[name=qu01]:checked');
            const qu02 = document.querySelector('input[name=qu02]:checked');
            const qu03 = document.querySelector('input[name=qu03]:checked');
            const qu04 = document.querySelector('input[name=qu04]:checked');
            if(!qu01 || !qu02 || !qu03 || !qu04){
                console.log("체크가 되지 않았음!!");
                return
            }            
            const answer = Number(qu01.value) + Number(qu02.value) + Number(qu03.value) + Number(qu04.value);
            // 난수 추출 
            let count = Math.floor(Math.random()*2) + 1;    
            if(answer > 3){
                count = 1;
            }
            modal_open(`modal${count}`)
        });
     

        var url_default_ks = "https://story.kakao.com/share?url=";
        var url_default_fb = "https://www.facebook.com/sharer/sharer.php?u=";
        var url_default_tw_txt = "https://twitter.com/intent/tweet?text=";
        var url_default_tw_url = "&url=";
        var url_default_band = "http://band.us/plugin/share?body=";
        var url_route_band = "&route=";
        var url_default_naver = "http://share.naver.com/web/shareView.nhn?url=";
        var title_default_naver = "&title=";

        var url_this_page = location.href;
        var title_this_page = document.title;

        var url_combine_ks = url_default_ks + url_this_page;
        var url_combine_fb = url_default_fb + url_this_page;
        var url_combine_tw = url_default_tw_txt + document.title + url_default_tw_url + url_this_page;
        var url_combine_band = url_default_band + encodeURI(url_this_page)+ '%0A' + encodeURI(title_this_page)+ '%0A' + '&route=tistory.com';
        var url_combine_naver = url_default_naver + encodeURI(url_this_page) +  title_default_naver + encodeURI(title_this_page);
    </script>
</body>
</html>